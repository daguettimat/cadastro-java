<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:adm="http://global5.com.br/adminfaces"
                template="/WEB-INF/templates/template.xhtml">

    <ui:define name="head-end">
     	<script type="text/javascript">
			function onTop(args) {
				window.scrollTo(0, 0);
				window.location = '#' + args;

			}
			
		</script>
    
        <style type="text/css">
            .ui-datatable table tbody tr td {
                padding: 3px; !important;
                padding-left: 5px;
            }
            .ui-grid-row .ui-grid-col-2,
            .ui-grid-row .ui-grid-col-10 {
                padding: 0;
                margin-left: 10px;
            }

            .ui-orderlist .ui-orderlist-list {
                height: 30px;
            }

            .ui-orderlist .ui-grid-row .ui-grid-col-2,
            .ui-orderlist .ui-grid-row .ui-grid-col-10 {
                padding: 0;
            }
            .center  {
                margin-left: auto;
                margin-right: auto;
                display: block;
            }
        </style>
    </ui:define>
	    	
    <ui:define name="title"  >
     	Registro de Eventos 
    </ui:define>
	 
    <ui:define name="description">
        Boletim Informativo        
    </ui:define>
 

    <ui:define name="body">
        <adm:breadcrumb title="Lista de Eventos para BI"/>
       
        <h:form id="frmFiltroPesq">
       
        	<div class="align-right" style="padding-right: 10px" >
           		<p >
  					<a class="btn btn-info" data-toggle="collapse" href="#multiCollapseExample1" role="button" aria-expanded="false" 
  						aria-controls="multiCollapseExample1" 
  						title="Amplie as opções de pesquisa">
  						Filtro de Pesquisa
  						<span class="pull-right-container">
							<i class="fa fa-search pull-left" />
						</span>
  					</a>
  					<p:spacer width="3px" />
  					<p:commandButton id="btnLimpaFiltro" action="#{eventoMB.listarEventosAberto()}" 
  							value="Eventos Abertos" icon="fa fa-list-ol" title="Lista todos Eventos em Aberto" 
                          	styleClass="btn-success"/> 
                    
  					
  					<p:commandButton id="btnAddEvento" value="Adicionar Evento" icon="fa fa-crosshairs" 
  					title="Adiciona um novo evento com base nº SM" actionListener="#{eventoMB.insert}"
                          styleClass="btn-warning"  oncomplete="PF('dlgAddEvento').show();onTop('dlgAddEvento')"/> 
                                 
		 		</p>
		 		
            </div> 		 
  		
			<div class="row" >
  				<div class="col">
    				<div class="collapse multi-collapse" id="multiCollapseExample1">
     					<h:form >
							<p:panel style="margin-left: 13px;margin-right: 13px;padding-botton:5px; border: 2px solid orange;">
								
								<div class="ui-g ui-fluid">
									<div class="col-lg-1">
										<p:outputLabel value="Evento Inicial:"></p:outputLabel>										
									</div>
									<div class="col-lg-2">
									    
							            <p:selectOneMenu id="console" value="#{eventoMB.tipoEventoPesq}" style="width:125px">
								            <f:selectItem itemLabel="Todos" itemValue="" />
								            <f:selectItem itemLabel="Danos" itemValue="D"  />
								            <f:selectItem itemLabel="Perda" itemValue="P" />
								            <f:selectItem itemLabel="Roubo" itemValue="S" />
								        </p:selectOneMenu>
								        
									</div>									

									<div class="col-lg-1">
										<p:outputLabel value="Finalizado:"></p:outputLabel>
									</div>

									<div class="col-lg-1">

										<p:selectBooleanButton value="#{eventoMB.eventoFinalizado}" 
											offLabel="Não" onLabel="Sim">										
										</p:selectBooleanButton>
									        								
        							</div>	
									
									<div class="col-lg-1">
										<p:outputLabel value="Evento Final:"></p:outputLabel>										
									</div>
									<div class="col-lg-2">
									    
							            <p:selectOneMenu id="consoleF" value="#{eventoMB.tipoEventoFinalPesq}" style="width:125px">
								            <f:selectItem itemLabel="Selecione ..." itemValue="" />								            
								            <f:selectItem itemLabel="Danos" itemValue="D"  />
								            <f:selectItem itemLabel="Perda" itemValue="P" />
								            <f:selectItem itemLabel="Roubo" itemValue="S" />
								        </p:selectOneMenu>
								        
									</div>

								</div>
								
								<p/>
								<div class="ui-g ui-fluid">
								
									<div class="col-lg-1">
										<p:inputNumber style="width:100%;" id="inptNumSmPesq" inputStyle="text-align:left" 
											 	size="15" maxlength="15" value="#{eventoMB.numeroSM}" placeholder="SM nº" title="Número da Viagem"
												minValue="0" maxValue="999999999" thousandSeparator="."/>																				
									</div>
									
									<p/>
																																																							
								</div>
								
								<p:spacer width="5" />
							
								<div class="ui-g ui-fluid" id="filterLn2">
								
									<div class="col-lg-8">
										<p:inputText  
											style="width:100%" value = "#{eventoMB.nomeCliente}" maxlength="80" 
											placeholder="Cliente" title="Parte do nome do cliente" ></p:inputText>
									</div>
			
								</div>
								
								<p:spacer width="5" />
								<div class="ui-g ui-fluid">
									<div class="col-lg-2">										
										<p:calendar id="dataInicial" placeholder="Dt Início"
											 value="#{eventoMB.pesqDtInicio}"
											 inputStyle="text-align:center"
											 locale="pt_BR" navigator="true" pattern="dd-MM-yyyy"
											 showButtonPanel="true" title="Data inicial - maior que o dia">
										</p:calendar>
									</div>

									<div class="col-lg-2">										
										<p:calendar id="dataFinal" placeholder="Dt Final" 
											value="#{eventoMB.pesqDtFinal}"
											inputStyle="text-align:center"
											locale="pt_BR" navigator="true" pattern="dd-MM-yyyy"
										    showButtonPanel="true" title="Data final - menor que o dia.">
										</p:calendar>										
									</div>
																								
									<div class="col-lg-2">
										<p:inputText  value="#{eventoMB.motoristaPesq}"	maxlength="8"
											style="width:100%" placeholder="Motorista" title="Parte do nome do motorista"></p:inputText>
									</div>
								
									<div class="col-lg-2">
										<p:inputText  value="#{eventoMB.placaPesq}"	maxlength="8"
											style="width:100%" placeholder="Placa" title="Parte da Placa do Veículo do cliente"></p:inputText>
									</div>									
																																																														
								</div>								
								
								<div class="row" id="filterLn3">

									<div class="align-right" style="padding: 5px;">
										<p:commandButton id="btnPesquisar" value="Pesquisar"
										actionListener="#{eventoMB.checarBotaoPesquisar(1)}"
                                                     update="formListaEventos" process="@form" icon="fa fa-search"  
											 />
										<p:spacer height="5" />
										<p:commandButton id="btnClearFilter" value="Nova Consulta" action="#{eventoMB.limparCamposPesquisa}"
											  icon="fa fa-filter" 
											 style="text-shadow:1px 1px 3px red;" />
									 	<p:spacer height="5" />
									</div>
								</div>
							</p:panel>							
						</h:form>
    				</div>
  				</div>
  			</div>
        </h:form>
        		
		<h:form id="formPosSelecao">
		
			<!-- <p:growl autoUpdate="true" showDetail="true" severity="info,warn,error,fatal" id="msgPrev" life="5000"/> --> 		
			
			<div class="ui-g" id="dvSubTotais">
			
				<div class="ui-g-12 ui-md-4">
					<p:panel styleClass="bg-yellow"  style="border-radius: 10px;box-shadow:1px 1px 2px 	#808080">
						<div class="row">
							<div class="col-lg-8" >
								<h:outputText value=" Sinistro de Perdas "
								style="font-size: 12pt;color: white;font-weight: bold;text-align: center;display:block" />
							</div>
							<div class="col-lg-4">
								<span class="badge">
									#{eventoMB.qtdBiPerdas}
								</span>
							</div>
						</div>
					</p:panel>
				</div>
				
				<div class="ui-g-12 ui-md-4">
				
					<p:panel styleClass="bg-orange" style="border-radius: 10px;box-shadow:1px 1px 2px 	#808080">
						<div class="row">
							<div class="col-lg-8">
								<h:outputText value=" Sinistro de Danos "
								style="font-size: 12pt;color: white;font-weight: bold;text-align: center;display:block" />
							</div>
							<div class="col-lg-4">
								<span class="badge">
									#{eventoMB.qtdBiDanos}
								</span>
							</div>
						</div>
					</p:panel>
				</div>
				
				<div class="ui-g-12 ui-md-4" style="text-align: center">
					<p:panel styleClass="bg-red" style="border-radius: 10px;box-shadow:1px 1px 2px 	#808080">
						<div class="row">
							<div class="col-lg-8">
								<h:outputText value=" Suspeita de Roubo "
								style="font-size: 12pt;color: white;font-weight: bold;text-align: center;display:block" />
							</div>
							<div class="col-lg-4">
								<span class="badge">
									#{eventoMB.qtdBiSuspeitas}
								</span>
							</div>
						</div>
					</p:panel>
				</div>
			</div>
			<!-- final dvSubTotais / to panel -->
		</h:form>
		
        <h:form id="formListaEventos">
             <p id="demo"></p>       
            <h:panelGroup layout="block"  >
    	
   			<p:dataTable widgetVar="dtEvento" var="c" value="#{eventoMB.listEventos}" rows="20" styleClass="box-primary"
                             id="tbListEvento"
                             rowKey="#{c.id}" lazy=""  paginator="true" emptyMessage="Nenhum Evento de Boletim de Informativo cadastrado!"
                             paginatorPosition="bottom"  
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {JumpToPageDropdown}"
                             currentPageReportTemplate="[ Mostrando de {startRecord} até {endRecord} de {totalRecords} registro(s)- Página: {currentPage}/{totalPages} ]"
                             rowsPerPageTemplate="5,10,15,20,30,50,100">
					
				
					<f:facet name="header">	
						Eventos #{eventoMB.statusTabelaEvento}					
                    </f:facet>

                    <p:column headerText="ID" style="width:4%" >
                        <div align="left" style="padding-right: 10px;">
                            <p:outputLabel value="#{c.id}" style="text-align: center;display:block">                                
                            </p:outputLabel>	
                        </div>                        
                    </p:column>
                    <p:column headerText="SM" style="width:4%" >
                        <div align="left" style="padding-right: 10px;">
                            <p:outputLabel value="#{c.sincViagem}" style="text-align: center;display:block">                                
                            </p:outputLabel>	
                        </div>                        
                    </p:column>
                    <p:column headerText="Aberto" style="width:5%" >
                         <div align="left" style="padding-right: 10px;">
                            <p:outputLabel value="#{c.dtCriacao}" style="text-align: center;display:block">
                                <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                            </p:outputLabel>
                        </div>                        
                    </p:column>
                    <p:column headerText="Cliente" style="width:12%" >
                        <div align="right" style="padding-right: 10px;">
                            <p:outputLabel value="#{c.area.nome}" style="text-align: left;display:block">                                
                            </p:outputLabel>
                        </div>                        
                    </p:column>

                    <p:column headerText="Evento" style="width:3%" >
                        <div align="left" style="text-align: center;display:block">
                            <p:outputLabel value="#{c.nrEvento}" style="text-align: center;display:block">                                
                            </p:outputLabel>	
                        </div>                        
                    </p:column>

                    <p:column headerText="BI" style="width:10%">
                        <div align="left" style="padding-right: 10px;">
                            <p:outputLabel value="#{c.boletimInformativo.rotulo}" style="text-align: center;display:block">                                
                            </p:outputLabel>	
                        </div>                        
                    </p:column>

                    <p:column headerText="Placa" style="width:5%">
                        <div align="left" style="padding-right: 10px;">
                            <p:outputLabel value="#{c.placa}" style="text-align: left;display:block">                                
                            </p:outputLabel>	
                        </div>                        
                    </p:column>
                    
                    <p:column headerText="Motorista" style="width:10%">
                        <div align="left" style="padding-right: 10px;">
                            <p:outputLabel value="#{c.motorista}" style="text-align: left;display:block">                                
                            </p:outputLabel>	
                        </div>                        
                    </p:column>
                                        
                    <p:column headerText="E.I." style="width:2%">
                        <div align="left" style="padding-right: 10px;">
                            <p:outputLabel value="#{c.tipoInicial}" style="text-align: center;display:block">                                
                            </p:outputLabel>	
                        </div>                        
                    </p:column>

                    <p:column headerText="E.F." style="width:2%" >
                        <div align="left" style="padding-right: 10px;">
                            <p:outputLabel value="#{c.tipoFinal}" style="text-align: center;display:block">                                
                            </p:outputLabel>	
                        </div>                        
                    </p:column>

                    <p:column headerText="Encerrado" style="width:5%" >
                         <div align="left" style="padding-right: 10px;">
                            <p:outputLabel value="#{c.dtFinalizacao}" style="text-align: center;display:block">
                                <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                            </p:outputLabel>
                        </div>                        
                    </p:column>                    
                    
                    <p:column headerText="Operações" style="width:8%" >
                    	<div style="text-align: center ">
							
							<div class="col-lg-3">
						 		<p:commandLink title="Adicionar Boletim" oncomplete="PF('dlgAddBoletim').show();onTop('dlgAddBoletim')"
						 			actionListener="#{eventoMB.eventoSelecionadoEmissaoBoletim(c.id)}" process="@this" update="@form"
						 			disabled="#{c.tipoFinal!=null}" 	>
						 			<i class="fa fa-plus"  style="font-size:15px;color:red;text-shadow:1px 1px 3px #000000;"/>	
						 		</p:commandLink> 
							</div>

							<div class="col-lg-3">
						 		<p:commandLink title="Visualizar" oncomplete="PF('dlgViewBoletim').show();onTop('dlgViewBoletim')"
						 			actionListener="#{eventoMB.eventoSelecionadoViewBoletim(c.id)}" update="@form:frmTbAnexoBoletimB" >
						 			<i class="fa fa-eye"  style="font-size:15px;color:red;text-shadow:1px 1px 3px #000000;"/>	
						 		</p:commandLink> 
							</div>
							
							<div class="col-lg-3">
						 		<p:commandLink title="Anexos" oncomplete="PF('dlgAddAnexosBoletim').show();onTop('dlgAddAnexosBoletim')"
						 			actionListener="#{eventoMB.eventoSelecionadoEmissaoBoletim(c.id)}" process="@this" update="@form">
						 			<i class="fa fa-paperclip"  style="font-size:15px;color:red;text-shadow:1px 1px 3px #000000;"/>	
						 		</p:commandLink> 
							</div>

							<div class="col-lg-3">
						 		<p:commandLink title="Cancelar" oncomplete="PF('dlgCancel').show();onTop('dlgCancel')"
						 			disabled="#{c.nrBoletim gt 0 ? 'true' : 'false'}"
						 			actionListener="#{eventoMB.buscarEventoPCancelar(c.id)}" 
						 			update="@form" process="@this">
						 			<i class="fa fa-ban"  style="font-size:15px;color:red;text-shadow:1px 1px 3px #000000;"/>	
						 		</p:commandLink> 
							</div>

                  		 
                    	</div>
   
    				</p:column>  
    				
    			
                </p:dataTable>
            
            
            
            
            
			<p:dialog id="dlgCancel" widgetVar="dlgCancel"
				header="Deseja Cancelar o Evento ? " modal="true"
				resizable="false" closable="false" width="600" position="center, center"
				styleClass="box-primary">
				<p:outputPanel id="fatDetalheCancel">

					<div class="ui-g ui-fluid" >
						<div class="col-lg-2">
							<p:outputLabel value="id: " />
						</div>
						<div class="col-lg-8">
							<p:outputLabel value=" #{eventoMB.ev.id} " style="color: #1266e5;" />
						</div>
					</div>

					<div class="ui-g ui-fluid" >
						<div class="col-lg-2">
							<p:outputLabel value="Cliente: " />
						</div>
						<div class="col-lg-8">
						<p:outputLabel value=" #{eventoMB.ev.area.nome} " style="color: #1266e5;" />
						</div>
					</div>

					<div class="ui-g ui-fluid" >
						<div class="col-lg-2">
							<p:outputLabel value="SM: " />
						</div>
						<div class="col-lg-8">
						<p:outputLabel value=" #{eventoMB.ev.sincViagem} " style="color: #1266e5;" />
						</div>
					</div>

					<p:spacer width="2px" />
					<p:separator style="border-color:red" />
					<div class="align-center">

						<p:commandButton value="Voltar" onclick="PF('dlgCancel').hide()"
							
							styleClass="btn btn-primary">
						</p:commandButton>

						<p:commandButton value="Cancelar" styleClass="btn btn-success"
							actionListener="#{eventoMB.cancelarEvento}"
							onclick="PF('dlgCancel').hide()"
							oncomplete="javascript: window.scrollTo(0, 0);"
                            update="@form" process="@this">
						</p:commandButton>

					</div>

				</p:outputPanel>

			</p:dialog>


            
            
            </h:panelGroup>
       		
       		<p:growl id="growlAddEvento" showDetail="true" sticky="true" />
     	    
     	    <p:dialog id="dlgAddEvento" widgetVar="dlgAddEvento"
				header="Deseja gerar um novo evento de Ocorrência?" modal="true" 
				resizable="false" closable="false" width="800" position="center, center"
				styleClass="box-primary">
				  
				<p:outputPanel id="eveDetalhe">

					<div class="ui-g ui-fluid" id="divSM">
						<div class="col-lg-4">
							<p:outputLabel value="SM: " />
						</div>
						<div class="col-lg-4">
						
								<p:inputNumber style="width:100%;" id="inptNumSM" inputStyle="text-align:left" 
											 	size="15" maxlength="15" value="#{eventoMB.numeroSM}" 
												minValue="0" maxValue="999999999" decimalSeparator="," placeholder="informe aqui..."
												thousandSeparator=".">											
								
									<p:ajax listener="#{eventoMB.checarSmParaAbrirEvento()}"/>
									
								</p:inputNumber>
						</div>
										
					</div>

					<p:separator style="border-color:red" />
									 					 	
					<p:outputPanel id="pnDdSMS">				
						
						<!-- Cliente -->
						<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="Cliente " style="color:#0099ff;font-weight: bold"/>
							</div>
						</div>						
						<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="Razão Social: " style="font-weight: bold"/>
							</div>
							<div class="col-lg-10">
								<h:outputLabel value="#{eventoMB.nomeClienteChp}" />
							</div>
						</div>						

						<!-- Motorista 1 -->
						<div class="ui-g ui-fluid">
							<div class="col-lg-6">
								<h:outputLabel value="Motorista 1 " style="color:#0099ff;font-weight: bold" />
							</div>
							<div class="col-lg-6">
								<h:outputLabel value="Motorista 2 " style="color:#0099ff;font-weight: bold"/>
							</div>							
						</div>
						<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="Nome: " style="font-weight: bold"/>
							</div>
					 		<div class="col-lg-4">
					 			<h:outputLabel value="#{eventoMB.nomeMotorista1Chp}" />	
					 		</div>
					 		<div class="col-lg-2">
								<h:outputLabel value="Nome: " style="font-weight: bold" />
							</div>
					 		<div class="col-lg-4">
					 			<h:outputLabel value="#{eventoMB.nomeMotorista2Chp}" />	
					 		</div>
						</div>
						
						<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="cpf: " style="font-weight: bold"/>
							</div>
					 		<div class="col-lg-4">
					 			<h:outputLabel value="#{eventoMB.cpfMotorista1Chp}" />	
					 		</div>
					 		<div class="col-lg-2">
								<h:outputLabel value="cpf: "  style="font-weight: bold"/>
							</div>
					 		<div class="col-lg-4">
					 			<h:outputLabel value="#{eventoMB.cpfMotorista2Chp}" />	
					 		</div>											 						 							
						</div>
						
						<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="Vínculo: " style="font-weight: bold"/>
							</div>
					 		<div class="col-lg-4">
					 			<h:outputLabel value="#{eventoMB.vinculoMotorista1Chp}" />	
					 		</div>
					 		<div class="col-lg-2">
								<h:outputLabel value="Vínculo: " style="font-weight: bold"	/>
							</div>
					 		<div class="col-lg-4">
					 			<h:outputLabel value="#{eventoMB.vinculoMotorista2Chp}" />
					 		</div>
						</div>
						
						<!-- Cavalo -->
						<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="Cavalo " style="color:#0099ff;font-weight: bold" />
							</div>
						</div>

						<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="Placa: "  style="font-weight: bold" />
							</div>
							<div class="col-lg-4">
								<h:outputLabel value="#{eventoMB.placaCavaloChp}" />
							</div>
							<div class="col-lg-2">
								<h:outputLabel value="Cor: "  style="font-weight: bold"/>
							</div>
							<div class="col-lg-4">
								<h:outputLabel value="#{eventoMB.corCavaloChp}" />		
							</div>							
						</div>

						<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="Marca: "  style="font-weight: bold" />
							</div>
							<div class="col-lg-4">
								<h:outputLabel value="#{eventoMB.marcaCavaloChp}" />
							</div>
							<div class="col-lg-2">
								<h:outputLabel value="Modelo: "  style="font-weight: bold" />
							</div>
							<div class="col-lg-4">
								<h:outputLabel value="#{eventoMB.modeloCavaloChp}" />	
							</div>							
						</div>

					 	<div class="ui-g ui-fluid">
					 		<div class="col-lg-2">
								<h:outputLabel value="Ano: "  style="font-weight: bold"/>
							</div>
							<div class="col-lg-4">
								<h:outputLabel value="#{eventoMB.anoCavaloChp}" />
							</div>							
						</div>

					 	
					 	
					 	<!-- Reboques -->
						<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="Reboques " style="color:#0099ff;font-weight: bold" />
							</div>
						</div>
					 	
					 	<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="Reboque 1 " style="color:#0099ff;font-weight: bold" />
							</div>
						</div>					 						 
					 	<div class="ui-g ui-fluid">
							<div class="col-lg-1">
								<h:outputLabel value="Placa: " style="font-weight: bold" />
							</div>
							<div class="col-lg-3">
								<h:outputLabel value="#{eventoMB.placaReboque1Chp}" />
							</div>
							<div class="col-lg-2">
								<h:outputLabel value="Cor: "  style="font-weight: bold" />
							</div>
							<div class="col-lg-2">
								<h:outputLabel value="#{eventoMB.corReboque1Chp}" />	
							</div>
							<div class="col-lg-1">
								<h:outputLabel value="Modelo: "   style="font-weight: bold"/>
							</div>
							<div class="col-lg-3">
								<h:outputLabel value="#{eventoMB.modeloReboque1Chp}" />	
							</div>							
						</div>	
					 	
					 	<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="Reboque 2 " style="color:#0099ff;font-weight: bold"  />
							</div>
						</div>					 						 
					 	<div class="ui-g ui-fluid">
							<div class="col-lg-1">
								<h:outputLabel value="Placa: "   style="font-weight: bold"/>
							</div>
							<div class="col-lg-3">
								<h:outputLabel value="#{eventoMB.placaReboque2Chp}" />
							</div>
							<div class="col-lg-2">
								<h:outputLabel value="Cor: "  style="font-weight: bold"/>
							</div>
							<div class="col-lg-2">
								<h:outputLabel value="#{eventoMB.corReboque2Chp}" />	
							</div>
							<div class="col-lg-1">
								<h:outputLabel value="Modelo: "  style="font-weight: bold"/>
							</div>
							<div class="col-lg-3">
								<h:outputLabel value="#{eventoMB.modeloReboque2Chp}" />	
							</div>							
						</div>	


					 	<div class="ui-g ui-fluid">
							<div class="col-lg-2">
								<h:outputLabel value="Reboque 3 "  style="color:#0099ff;font-weight: bold"/>
							</div>
						</div>					 						 
					 	<div class="ui-g ui-fluid">
							<div class="col-lg-1">
								<h:outputLabel value="Placa: "  style="font-weight: bold"/>
							</div>
							<div class="col-lg-3">
								<h:outputLabel value="#{eventoMB.placaReboque3Chp}" />
							</div>
							<div class="col-lg-2">
								<h:outputLabel value="Cor: "   style="font-weight: bold"/>
							</div>
							<div class="col-lg-2">
								<h:outputLabel value="#{eventoMB.corReboque3Chp}" />	
							</div>
							<div class="col-lg-1">
								<h:outputLabel value="Modelo: "  style="font-weight: bold"/>
							</div>
							<div class="col-lg-3">
								<h:outputLabel value="#{eventoMB.modeloReboque3Chp}" />	
							</div>							
						</div>	
										 
					 </p:outputPanel>
					
					<p:separator style="border-color:red" />
					
					<div class="align-center">

						<p:commandButton value="Não" onclick="PF('dlgAddEvento').hide()"
							actionListener="#{eventoMB.limparVariaveis}" process="@form" update="@form"
							styleClass="btn btn-primary">
						</p:commandButton>

						
						<p:commandButton value="Sim" styleClass="btn btn-success" id="btnAddEvento"
							actionListener="#{eventoMB.update(eventoMB.numeroSM)}"
							onclick="PF('dlgAddEvento').hide()"
							oncomplete="javascript: window.scrollTo(0, 0);" 
							disabled="#{!eventoMB.habilitarBtnGerarEvento}"
                            update=":formListaEventos:tbListEvento" process="@form">
						</p:commandButton>


					</div>

				</p:outputPanel>

			</p:dialog>
        
	    	<p:dialog id="dlgAddBoletim" widgetVar="dlgAddBoletim"
				header="Boletim Informativo - Abertura" modal="true"
				resizable="false" closable="false" width="800" position="center, center"
				styleClass="box-primary">
				
				<p:outputPanel >
				
					<p:outputPanel id="pnTpEvento" style="margin-bottom:10px">

					<div class="ui-g ui-fluid">
						<div class="col-lg-12" style="font-weight: bold;display: block; text-aling:center;">
							<h4>Dados do Evento</h4>
							<p:outputLabel value="SM:"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.sincViagem}"></p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Cliente:"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.area.nome}"></p:outputLabel>							
						</div>
					</div>	
					<div class="ui-g ui-fluid">
						<div class="col-lg-12" style="font-weight: bold;display: block; text-aling:center;">
							<p:outputLabel value="Boletim Inicial:"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.tipoInicial}"></p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Boletim Final:"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.tipoFinal}"></p:outputLabel>
							
						 </div>					
					</div>									
					
					<p/>
					
					<p:separator/>					
					
					<div class="ui-g ui-fluid" >
						<div class="col-lg-12" style="font-weight: bold;display: block; text-aling:center;">
							<h4>Dados para o Boletim</h4>
						</div>
					</div>
					<div class="ui-g ui-fluid" >
							
						<div class="col-lg-3" style="font-weight: bold;display: block; text-aling:center;">
							<p:outputLabel value="Boletim Tipo"></p:outputLabel>
						</div>
						<div class="col-lg-9" >
					        <p:selectOneRadio id="console" value="#{eventoMB.tipoSelecaoBi}" >
            					<f:selectItem itemLabel="Sinistro de Perdas" itemValue="P" />
            					<f:selectItem itemLabel="Sinistro de Danos"  itemValue="D" />
            					<f:selectItem itemLabel="Suspeita de Roubo"  itemValue="S" />
            					<p:ajax listener="#{eventoMB.selecaoTipoBoletim()}"/>
        					</p:selectOneRadio>
						</div>
					</div>
					
					</p:outputPanel>
					<ui:fragment id="fragBoletimFinal" rendered="#{eventoMB.habilitaDivBoletimFinal}">
						<div class="ui-g ui-fluid" id="divSM">
							<div class="col-lg-3">
                        		<p:outputLabel value="Boletim Final"/>
	                        </div>
    	                  
        	                <div class="col-lg-3">                        	
								<p:selectBooleanButton value="#{eventoMB.boletimFinal}" 
										offLabel="Não" onLabel="Sim">
									<p:ajax listener="#{eventoMB.selecaoBoletimFinal()}"/>
								</p:selectBooleanButton>
							</div>
									
						</div>
					</ui:fragment>

					<p:separator style="border-color:red" />
					
					<div class="align-center">
						<div class="col-lg-12">
                        	<p:outputLabel value="Deseja gerar o boletim informativo para essa SM #{eventoMB.ev.sincViagem} deste evento? " style="color:blue;font-size:20px"/>
                        </div>
					</div>
					
					<p:spacer height="5px" />
					
					<div class="align-center">

						<p:commandButton value="Não" onclick="PF('dlgAddBoletim').hide()"
							styleClass="btn btn-primary" >
						</p:commandButton>

						<p:commandButton id="btnAddBoletim" value="Sim" styleClass="btn btn-success" partialSubmit="true"						
							onclick="PF('dlgAddBoletim').hide()" actionListener="#{eventoMB.checarTipoSelecionado()}" 
							oncomplete="javascript: window.scrollTo(0, 0);" disabled="#{!eventoMB.habilitarBtnAbrirGerarBoletim}">
							<p:ajax listener="#{boletimInformativoMB.insertBi}" /> 

							
						</p:commandButton>
						

					</div>

				</p:outputPanel>

			</p:dialog>

			<p:dialog id="dlgAddAnexosBoletim" widgetVar="dlgAddAnexosBoletim"
				header="Boletim Informativo - Anexos" modal="true" resizable="false"
				closable="true" width="1000" position="center,center"
				styleClass="box-primary">

				<h:form id="frmTbAnexoBoletim">

					<div class="ui-g ui-fluid">
						<div class="col-lg-12"
							style="font-weight: bold; display: block; text-align: left;">
							<h4>Dados do Evento</h4>
							<p:outputLabel value="ID:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.id}"></p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Evento Nº:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.nrEvento}"></p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="SM:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.sincViagem}"></p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Cliente:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel
								value="#{eventoMB.ev.area.nome}"></p:outputLabel>
						</div>
					</div>
					<p />
					<div class="ui-g ui-fluid">
						<div class="col-lg-12"
							style="font-weight: bold; display: block; text-align: left;">
							<p:outputLabel value="Aberto em:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.dtCriacao}">
								<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
							</p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Tipo Inicio:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.tipoInicial}"></p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Encerrado em:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.dtFinalizacao}">
								<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
							</p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Tipo Final:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.tipoFinal}"></p:outputLabel>
						</div>
					</div>

					<p:separator />

					<p:tabView id="tabAnexosDoEvento">
						<p:tab title="Arquivos Anexados" titleStyleClass="box-warning">
							<p:dataTable var="x" value="#{eventoMB.listEventoAnexo}"
								id="tbArquivosAnexos" rows="8" styleClass="box-warning"
								rowKey="#{x.id}" scrollable="true" scrollWidth="true"
								paginator="true" paginatorPosition="bottom"
								emptyMessage="Nenhum registro de arquivo anexado ao Evento!"
								paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {JumpToPageDropdown}"
								currentPageReportTemplate="[ Mostrando de {startRecord} até {endRecord} de {totalRecords} registro(s)- Página: {currentPage}/{totalPages} ]"
								rowsPerPageTemplate="5,10,15,20,30,50,100">

								<p:column headerText="ID" style="width: 3%">
									<h:outputText value="#{x.id}"
										style="text-align: center;display: block;" />
								</p:column>

								<p:column headerText="Dt Anexo"  style="width: 10%">
									<h:outputText value="#{x.dtCriacao}"
										style="text-align: center;display: block;">
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
									</h:outputText>
								</p:column>

								<p:column headerText="Tipo Anexo" style="width: 10%">
									<h:outputText value="#{x.tipoAnexo.descricao}"
										style="text-align:left;display: block;">
									</h:outputText>
								</p:column>

								<p:column headerText="Descrição" style="width: 25%">
									<h:outputText value="#{x.descricao}"
										style="text-align: left;display: block;">
									</h:outputText>
								</p:column>

								<p:column headerText="Tipo Arq." style="width: 10%">
									<h:outputText value="#{x.arquivoTipo}"
										style="text-align: center;display: block;">
									</h:outputText>
								</p:column>

								<p:column headerText="Nome Arq." style="width: 10%">
									<h:outputText value="#{x.arquivoNome}"
										style="text-align: left;display: block;">
									</h:outputText>
								</p:column>

								<p:column headerText="Usuário" style="width: 10%">
									<h:outputText value="#{x.usuCriacao.nome}"
										style="text-align: left;display: block;">
									</h:outputText>
								</p:column>
								
								<p:column headerText="Excluir" style="width:5%;" >
									<div class="col-lg-12">
									<p:commandButton id="btnExcluirAnexo" icon="fa fa-trash" update="@form"
 		 								styleClass="bg-red"  			 
		 								style="width: 10px; height: 20px; text-shadow:1px 1px 2px #808080;
		 											border-radius: 15px;text-align: center;display: block;">
		 								<p:ajax listener="#{eventoMB.excluirAnexo(x.id)}" />			
		 							</p:commandButton>
									
									</div>
		 							
         				 		</p:column>
								
							</p:dataTable>
						</p:tab>
						<p:tab title="Anexar Arquivos" titleStyleClass="box-primary">
							<p:panel>

								<div class="ui-g ui-fluid" style="padding-top: 15px;">
									<div class="col-md-12">

										<h:form id="formUpLoadAnexo">
											
											<div class="ui-g ui-fluid">
												<div class="col-md-4">
													<p:outputLabel value="Tipo Anexo" for="tipoAnexo" />
													<p:selectOneMenu id="tipoAnexo"
														style="width: 100%;height:34px;"
														value="#{eventoMB.idTipoAnexo}">
														<f:selectItem itemLabel="&#160;" itemValue="" />
														<p:ajax event="itemSelect"
															listener="#{eventoMB.onTipoAnexoSelecionado}" />
														<f:selectItems value="#{eventoMB.lstTipoAnexo}"
															var="lstTpAnexo" itemValue="#{lstTpAnexo.id}"
															itemLabel="#{lstTpAnexo.descricao}" />

													</p:selectOneMenu>
												</div>
												<div class="col-md-8">
													<p:outputLabel value="Descrição para o arquivo"
														for="inptDescArqAnexo" />
													<p:inputText id="inptDescArqAnexo"
														value="#{eventoMB.descArquivoAnexoFront}" maxlength="70">
														<p:ajax event="blur"
															listener="#{eventoMB.onDescArquivoAnexo}"
															partialSubmit="true" process="@this" />
													</p:inputText>
												</div>
											</div>

											<p />

											<p:fileUpload id="arqAnexoEvento" style="width: 100%"
												label="Selecionar Arquivo" uploadLabel="Subir Arquivo"
												cancelLabel="Cancelar" fileLimit="1"
												fileUploadListener="#{eventoMB.uploadArqAnexo}" 
												allowTypes="/(\.|\/)(gif|jpeg|jpg|png|pdf|zip|mp3|wav|mp4|avi|GIF|JPE?G|PNG|PDF|ZIP|MP3|WAV|MP4|AVI)$/"
												sizeLimit="62999999" mode="advanced"
												invalidSizeMessage="Tamanho máximo aceito por arquivo 60MB (megaBytes)."
												invalidFileMessage="Tipo de Arquivo não permitido"
												messageTemplate="Não foi possível enviar para o servidor o arquivo {name}."
												update="regArqAnexoEvento , lblMsgUploadAnexo , btnCancelarUpload, btnRegistrarAnexo " />

											<p:message id="regArqAnexoEvento" for="arqAnexoEvento" />
											
											<p:outputLabel style="color:brown;font-weight:bold; font-style: italic" 
												value="Tipo de extensão do arquivo para anexo: gif, jpeg, jpg, png, pdf, zip, mp3, wav, mp4, avi "/>
											
											<p:outputLabel
												style="color:brown;font-weight:bold; font-style: italic"
												value="#{eventoMB.msgArquivoUpload} " id="lblMsgUploadAnexo" />



											<div class="align-right" style="padding: 5px">
												<div class="col-md-3">
													<p:commandButton id="btnCancelarUpload"
														partialSubmit="true" process="@this"
														actionListener="#{eventoMB.limparUpload}"
														value="Cancelar Upload" styleClass="bg-orange"
														disabled="#{!eventoMB.btnRegistrarAnexoLiberado}"
														update="arqAnexoEvento , lblMsgUploadAnexo , btnRegistrarAnexo , btnCancelarUpload"></p:commandButton>
												</div>
												<div class="col-md-3">
													<p:commandButton id="btnRegistrarAnexo"
														partialSubmit="true" process="@this"
														actionListener="#{eventoMB.salvarRegistroDeAnexo}"
														value="Registrar Anexo" styleClass="bg-red"
														disabled="#{!eventoMB.btnRegistrarAnexoLiberado}"
														update="arqAnexoEvento , lblMsgUploadAnexo , btnRegistrarAnexo , btnCancelarUpload , tipoAnexo , inptDescArqAnexo"></p:commandButton>
												</div>
											</div>

										</h:form>

									</div>
								</div>



							</p:panel>
						</p:tab>
					</p:tabView>

				</h:form>


			</p:dialog>
       
			<p:dialog id="dlgViewBoletim" widgetVar="dlgViewBoletim"
				header="Boletim informativo emitidos por Evento" modal="true" resizable="false"
				closable="true" width="800" position="center,center"
				styleClass="box-primary">

				<h:form id="frmTbAnexoBoletimB">

					<div class="ui-g ui-fluid">
						<div class="col-lg-12"
							style="font-weight: bold; display: block; text-align: left;">
							<h4>Dados do Evento</h4>
							<p:outputLabel value="ID:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.id}"></p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Evento Nº:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.nrEvento}"></p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="SM:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.sincViagem}"></p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Cliente:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel
								value="#{eventoMB.ev.area.nome}"></p:outputLabel>
						</div>
					</div>
					<p />
					<div class="ui-g ui-fluid">
						<div class="col-lg-12"
							style="font-weight: bold; display: block; text-align: left;">
							<p:outputLabel value="Aberto em:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.dtCriacao}">
								<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
							</p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Tipo Inicio:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.tipoInicial}"></p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Encerrado em:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.dtFinalizacao}">
								<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
							</p:outputLabel>
							<p:spacer width="15px;"></p:spacer>
							<p:outputLabel value="Tipo Final:" style="color:brown"></p:outputLabel>
							<p:spacer width="5px;"></p:spacer>
							<p:outputLabel value="#{eventoMB.ev.tipoFinal}"></p:outputLabel>
						</div>
					</div>

					<p:separator />

					<p:dataTable var="bi" value="#{eventoMB.listBoletimPorEvento}" 
						id="tbBoletim" rows="8" styleClass="box-primary" rowKey="#{bi.id}"
						scrollable="true" scrollWidth="true" paginator="true"
						paginatorPosition="bottom" emptyMessage="Nenhum Evento de Boletim de Informativo cadastrado!"
						paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {JumpToPageDropdown}"
						currentPageReportTemplate="[ Mostrando de {startRecord} até {endRecord} de {totalRecords} registro(s)- Página: {currentPage}/{totalPages} ]"
						rowsPerPageTemplate="5,10,15,20,30,50,100">

						<p:column headerText="BI nº" style="width: 7%" >
							<h:outputText value="#{bi.rotulo}"
								style="text-align: left;display: block;" />
						</p:column>

						<p:column headerText="Comunicado" style="width: 10%">
							<h:outputText value="#{bi.comIniDataHora}"
								style="text-align: center;display: block;">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</h:outputText>
						</p:column>

						<p:column headerText="Hora" style="width: 10%">
							<h:outputText value="#{bi.comIniHora}"
								style="text-align: center;display: block;">
								<f:convertDateTime pattern="HH:mm" />
							</h:outputText>
						</p:column>

						<p:column headerText="Usuário" style="width: 10%">
							<h:outputText value="#{bi.usuEmissao.nome}"
								style="text-align: center;display: block;">
							</h:outputText>
						</p:column>

						<p:column headerText="BI Registrado" style="width: 10%">
							<h:outputText value="#{bi.dtEmissao}"
								style="text-align: center;display: block;">
								<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
							</h:outputText>
						</p:column>

  						<p:column headerText="Ver" style="width:3%;" >

							<p:commandButton id="btn2" icon="fa fa-eye" title="ver boletim" update="@form"
 		 								styleClass="bg-red"  onclick="this.form.target='_blank'" 			 
		 								style="width: 10px; height: 20px; text-shadow:1px 1px 3px #000000;border-radius: 15px;">
		 						<p:ajax listener="#{boletimInformativoViewMB.showBi(bi.id)}" />			
		 					</p:commandButton>
         				 </p:column>
         				             		
					</p:dataTable>

				</h:form>

			</p:dialog>
       
              	
		</h:form>
  	
   
    </ui:define>
    
</ui:composition>